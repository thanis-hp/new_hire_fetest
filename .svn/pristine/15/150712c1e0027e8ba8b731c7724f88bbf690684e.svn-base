create table TOPOLOGY (
	SUBSCRIBER_ID varchar(40) NOT null,
    SERVICE_NAME varchar(40) null,
    PORT varchar(50) not null,
    SERVICE_TYPE varchar(60) null,
    SERVICE varchar(10) null,
    PATH varchar(4000) null,
    BORDER_PATH varchar(4000) null,
    CATEGORY varchar(10) null,
    SPEED_PROFILE varchar(50) null,
    LAST_UPDATED_SPEED_PROFILE TIMESTAMP null,
    constraint pk_nodes primary key (SUBSCRIBER_ID)
);

create table ALARM (
	SEVERITY varchar(20) null,
	EVENT_TIME TIMESTAMP null,
    STATUS varchar(20) null,
    MANAGED_ELEMENT varchar(100) not null,
    ALARM_NAME varchar(30) null,
    LOCATION varchar(50) null,
    DOMAIN varchar(10) null,
    ADDITIONAL_TEXT varchar(400) null
);

CREATE TABLE JOBS_HPSA
  (
    WORKFLOWNAME  VARCHAR(20),
    SESSION_NAME  VARCHAR(40),
    SUBSCRIBER_ID VARCHAR(20),
    OWD_JOB_ID    VARCHAR(100) NOT NULL,
    PARAMETER     VARCHAR(30),
    RESULT        VARCHAR(50),
    STATUS        VARCHAR(10),
    MODIFIED TIMESTAMP,
    HPSA_JOB_ID    VARCHAR(10) NULL,
    PRIMARY KEY (OWD_JOB_ID)
  )

create table MANAGED_ELEMENT_KB (
	EQUIP_NAME varchar(20) null,
	DESCRIPTION varchar(200) null,
    DEVICE_STATUS varchar(20) null,
    PRIMARY KEY (EQUIP_NAME,DEVICE_STATUS)
);

create table NETWORK_KPI (
	SOURCE_EQUIP_NAME varchar(20) null,
	DESTINATION_EQUIP_NAME varchar(20) null,
	LATENCY varchar(40) null,
    PACKET_LOSS varchar(40) null,
    JITTER varchar(10) null,
    PRIMARY KEY (SOURCE_EQUIP_NAME,DESTINATION_EQUIP_NAME)
);


CREATE TABLE USERS (
    USER_ID INTEGER NOT NULL,
    USERNAME VARCHAR(45) NOT NULL,
    PASSWORD VARCHAR(45) NOT NULL,
    ENABLED INTEGER NOT NULL,
    NAME VARCHAR(45) NOT NULL,
    DEPT VARCHAR(35) NOT NULL,
    PRIMARY KEY(USER_ID)
);

CREATE TABLE USER_ROLES (
    USER_ROLE_ID INTEGER NOT NULL,
    USER_ID INTEGER NOT NULL,
    AUTHORITY VARCHAR(45) NOT NULL,
    PRIMARY KEY (USER_ROLE_ID),
    CONSTRAINT FK_USER_ROLES FOREIGN KEY (USER_ID) REFERENCES USERS (USER_ID)
);

create table USER_ACCESS_AUDIT(
    USER_ID varchar(45) not null,
    LOGIN TIMESTAMP null,
    LOGOUT TIMESTAMP null,
    SESSION_ID varchar(80) not null,
    PRIMARY KEY (USER_ID,SESSION_ID)
);

create table MANAGED_ELEMENT_CAB_INV (
	EQUIP_NAME varchar(40) null,
    CARD_SLOT varchar(40) null,
    PORT varchar(10) not null,
    PORT_STATUS varchar(10) default '0',
    CARD_STATUS varchar(10) default '0',
    constraint pk_cabs primary key (EQUIP_NAME,CARD_SLOT,PORT)
);

create table MANAGED_ELEMENT_INV (
	EQUIP_NAME varchar(40) null,
    DEVICE_IP varchar(40) null,
    DEVICE_TYPE varchar(10) not null,
    LOCATION varchar(50) null,
    VENDOR varchar(20) null,
    DEVICE_STATUS varchar(10) default '0',
    CPU_STATUS varchar(10) default '0',
    KPI_CPU varchar(10) default '0',
    KPI_MEM varchar(10) default '0',
    KPI_UTILZ varchar(10) default '0',
    KPI_THRESHOLD_MID_CPU varchar(10) default '0',
    KPI_THRESHOLD_MAX_CPU varchar(10) default '0',
    KPI_THRESHOLD_MID_MEM varchar(10) default '0',
    KPI_THRESHOLD_MAX_MEM varchar(10) default '0',
    KPI_THRESHOLD_MID_UTILZ varchar(10) default '0',
    KPI_THRESHOLD_MAX_UTILZ varchar(10) default '0',
    constraint pk_device primary key (EQUIP_NAME)
);

CREATE TABLE "OWD_DB"."SERV_DASH_LOC"
  (
    "LOCATION"    VARCHAR2(50 BYTE) NOT NULL,
    "H00"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H01"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H02"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H03"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H04"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H05"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H06"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H07"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H08"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H09"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H10"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H11"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H12"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H13"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H14"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H15"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H16"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H17"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H18"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H19"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H20"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H21"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H22"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H23"         VARCHAR2(2 BYTE) DEFAULT '0',
    "SERVICETYPE" VARCHAR2(10 BYTE) NOT NULL
  );

CREATE TABLE "OWD_DB"."SERV_DASH_REG"
  (
    "REGION"      VARCHAR2(50 BYTE),
    "H00"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H01"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H02"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H03"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H04"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H05"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H06"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H07"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H08"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H09"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H10"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H11"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H12"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H13"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H14"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H15"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H16"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H17"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H18"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H19"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H20"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H21"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H22"         VARCHAR2(2 BYTE) DEFAULT '0',
    "H23"         VARCHAR2(2 BYTE) DEFAULT '0',
    "SERVICETYPE" VARCHAR2(10 BYTE) NOT NULL ENABLE
  );

CREATE TABLE "OWD_DB"."LOCATION_MAP" (
    "ABBR"     VARCHAR2(20 BYTE) NOT NULL ENABLE,
    "LOCATION" VARCHAR2(100 BYTE) NOT NULL ENABLE,
    "REGION" VARCHAR2(100 BYTE) NOT NULL ENABLE,
    CONSTRAINT "LOCATION_MAP_PK" PRIMARY KEY ("ABBR")
);

CREATE TABLE "OWD_DB"."VENDOR_MAP" (
    "ABBR"     VARCHAR2(20 BYTE) NOT NULL ENABLE,
    "VENDOR" VARCHAR2(100 BYTE) NOT NULL ENABLE,
    CONSTRAINT "VENDOR_MAP_PK" PRIMARY KEY ("ABBR")
);

CREATE SEQUENCE user_seq
 START WITH     110
 INCREMENT BY   1
 maxvalue 999999999
 NOCACHE
 CYCLE;

CREATE SEQUENCE user_role_seq
 START WITH     10
 INCREMENT BY   1
 maxvalue 999999999
 NOCACHE
 CYCLE;

CREATE SEQUENCE JOBID_SEQ
 START WITH     1000
 INCREMENT BY   1
 maxvalue 999999999
 NOCACHE
 CYCLE;

 CREATE TABLE "OWD_DB"."MANAGED_ELEMENT_KB_NEW"
  (
    "EQUIP_NAME"    VARCHAR2(20 BYTE) NOT NULL,
    "DESCRIPTION"   VARCHAR2(200 BYTE) NOT NULL,
    "DEVICE_STATUS" VARCHAR2(2 BYTE) NOT NULL,
    "CREATED_DATE" TIMESTAMP NOT NULL,
    "USERNAME" VARCHAR2(45 byte) NOT NULL
  );



  --------------------------------------------------------
--  DDL for Table LOCATION_MAP
--------------------------------------------------------

  CREATE TABLE "OWD_DB"."LOCATION_MAP"
   (	"ABBR" VARCHAR2(20 BYTE),
	"LOCATION" VARCHAR2(100 BYTE),
	"REGION" VARCHAR2(100 BYTE)
   ) SEGMENT CREATION IMMEDIATE
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
REM INSERTING into OWD_DB.LOCATION_MAP
SET DEFINE OFF;
Insert into OWD_DB.LOCATION_MAP (ABBR,LOCATION,REGION) values ('BNR','BANGSAR','CENTRAL');
Insert into OWD_DB.LOCATION_MAP (ABBR,LOCATION,REGION) values ('BRF','BRICKFIELDS','CENTRAL');
Insert into OWD_DB.LOCATION_MAP (ABBR,LOCATION,REGION) values ('KLG','KLANG','CENTRAL');
Insert into OWD_DB.LOCATION_MAP (ABBR,LOCATION,REGION) values ('KLJ','KELANA JAYA','CENTRAL');
Insert into OWD_DB.LOCATION_MAP (ABBR,LOCATION,REGION) values ('JRC','JALAN RAJA CHULAN','CENTRAL');
--------------------------------------------------------
--  DDL for Index LOCATION_MAP_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "OWD_DB"."LOCATION_MAP_PK" ON "OWD_DB"."LOCATION_MAP" ("ABBR")
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  Constraints for Table LOCATION_MAP
--------------------------------------------------------

  ALTER TABLE "OWD_DB"."LOCATION_MAP" ADD CONSTRAINT "LOCATION_MAP_PK" PRIMARY KEY ("ABBR")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE;
  ALTER TABLE "OWD_DB"."LOCATION_MAP" MODIFY ("REGION" NOT NULL ENABLE);
  ALTER TABLE "OWD_DB"."LOCATION_MAP" MODIFY ("LOCATION" NOT NULL ENABLE);
  ALTER TABLE "OWD_DB"."LOCATION_MAP" MODIFY ("ABBR" NOT NULL ENABLE);



  --------------------------------------------------------
--  DDL for Table MANAGED_ELEMENT_INV
--------------------------------------------------------

  CREATE TABLE "OWD_DB"."MANAGED_ELEMENT_INV"
   (	"EQUIP_NAME" VARCHAR2(40 BYTE),
	"DEVICE_IP" VARCHAR2(40 BYTE),
	"DEVICE_TYPE" VARCHAR2(10 BYTE),
	"LOCATION" VARCHAR2(50 BYTE),
	"VENDOR" VARCHAR2(20 BYTE),
	"DEVICE_STATUS" VARCHAR2(10 BYTE) DEFAULT '0',
	"CPU_STATUS" VARCHAR2(10 BYTE) DEFAULT '0',
	"KPI_CPU" VARCHAR2(10 BYTE) DEFAULT '0',
	"KPI_MEM" VARCHAR2(10 BYTE) DEFAULT '0',
	"KPI_UTILZ" VARCHAR2(10 BYTE) DEFAULT '0',
	"KPI_THRESHOLD_MID_CPU" VARCHAR2(10 BYTE) DEFAULT '0',
	"KPI_THRESHOLD_MAX_CPU" VARCHAR2(10 BYTE) DEFAULT '0',
	"KPI_THRESHOLD_MID_MEM" VARCHAR2(10 BYTE) DEFAULT '0',
	"KPI_THRESHOLD_MAX_MEM" VARCHAR2(10 BYTE) DEFAULT '0',
	"KPI_THRESHOLD_MID_UTILZ" VARCHAR2(10 BYTE) DEFAULT '0',
	"KPI_THRESHOLD_MAX_UTILZ" VARCHAR2(10 BYTE) DEFAULT '0',
	"UTILZ_STATUS" VARCHAR2(2 BYTE) DEFAULT '0'
   ) SEGMENT CREATION IMMEDIATE
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index PK_DEVICE
--------------------------------------------------------

  CREATE UNIQUE INDEX "OWD_DB"."PK_DEVICE" ON "OWD_DB"."MANAGED_ELEMENT_INV" ("EQUIP_NAME")
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  Constraints for Table MANAGED_ELEMENT_INV
--------------------------------------------------------

  ALTER TABLE "OWD_DB"."MANAGED_ELEMENT_INV" MODIFY ("DEVICE_TYPE" NOT NULL ENABLE);
  ALTER TABLE "OWD_DB"."MANAGED_ELEMENT_INV" ADD CONSTRAINT "PK_DEVICE" PRIMARY KEY ("EQUIP_NAME")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;


  CREATE TABLE "OWD_DB"."POLYSTAR_CALL_ID_LIST"
  (
    "CALL_ID" VARCHAR2(20 BYTE) NOT NULL ENABLE,
    "START_DATE" DATE,
    "END_DATE" DATE,
    "A_NUMBER" VARCHAR2(20 BYTE),
    "B_NUMBER" VARCHAR2(20 BYTE)
  );










